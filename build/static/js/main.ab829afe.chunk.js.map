{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Persons","persons","deletePersonBtn","map","human","key","id","name","number","onClick","window","confirm","Filter","props","searchName","handleSearchChange","baseUrl","axios","get","then","response","data","nameObject","post","put","delete","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setSearchName","notificationMsg","setNotificationMsg","errorMsg","setErrorMsg","useEffect","personService","initialPersons","filteredName","filter","person","toLowerCase","indexOf","event","target","preventDefault","checkExistingName","includes","length","updatedPerson","updated","p","setTimeout","catch","error","returnedPerson","undefined","find","elm","alert","updatePersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ab829afe.chunk.js","sourcesContent":["import React from \"react\";\n\nconst PersonForm = ({\n  addName,\n  newName,\n  handleNameChange,\n  newNumber,\n  handleNumberChange\n}) => {\n  return (\n    <form onSubmit={addName}>\n      <div>\n        name: <input value={newName} onChange={handleNameChange} />\n      </div>\n      <div>\n        number: <input value={newNumber} onChange={handleNumberChange} />\n      </div>\n      <div>\n        <button type=\"submit\">add</button>\n      </div>\n    </form>\n  );\n};\n\nexport default PersonForm;\n","import React from \"react\";\n\nconst Persons = ({ persons, deletePersonBtn }) => {\n  function windowConfirm(id, name) {\n    if (window.confirm(`Delete ${name} ?`)) {\n      deletePersonBtn(id);\n    }\n    return;\n  }\n\n  return (\n    <>\n      {persons.map(human => (\n        <>\n          <p key={human.id}>\n            {human.name} {human.number}\n            <button onClick={() => windowConfirm(human.id, human.name)}>\n              delete\n            </button>\n          </p>\n        </>\n      ))}\n    </>\n  );\n};\n\nexport default Persons;\n","import React from \"react\";\n\nconst Filter = props => (\n  <input value={props.searchName} onChange={props.handleSearchChange} />\n);\n\nexport default Filter;\n","import axios from \"axios\";\nconst baseUrl = \"/api/persons\";\n\nconst getAll = () => {\n  const request = axios.get(baseUrl);\n  return request.then(response => response.data);\n};\n\nconst create = nameObject => {\n  const request = axios.post(baseUrl, nameObject);\n  return request.then(response => response.data);\n};\n\nconst update = (id, nameObject) => {\n  const request = axios.put(`${baseUrl}/${id}`, nameObject);\n  return request.then(response => response.data);\n};\n\nconst deletePerson = (id, nameObject) => {\n  const request = axios.delete(`${baseUrl}/${id}`, nameObject);\n  return request;\n};\n\nexport default { getAll, create, update, deletePerson };\n","import React from \"react\";\n\nconst Notification = ({ message, type }) => {\n  if (message === null) {\n    return null;\n  }\n  if (type === \"error\") {\n    return <div className=\"notification error\">{message}</div>;\n  }\n\n  return <div className=\"notification\">{message}</div>;\n};\n\nexport default Notification;\n","import React, { useState, useEffect } from \"react\";\nimport PersonForm from \"./components/PersonForm\";\nimport Persons from \"./components/Persons\";\nimport Filter from \"./components/Filter\";\nimport personService from \"./services/persons\";\nimport Notification from \"./components/Notification\";\n\nconst App = () => {\n  const [persons, setPersons] = useState([]);\n  const [newName, setNewName] = useState(\"add new name..\");\n  const [newNumber, setNewNumber] = useState(\"add number...\");\n  const [searchName, setSearchName] = useState(\"\");\n  const [notificationMsg, setNotificationMsg] = useState(null);\n  const [errorMsg, setErrorMsg] = useState(null);\n\n  useEffect(() => {\n    personService.getAll().then(initialPersons => {\n      setPersons(initialPersons);\n    });\n  }, []);\n\n  const added = (name, data) => {\n    let isAdded = data.find(elm => elm.name === name);\n    if (isAdded === undefined) {\n      return false;\n    }\n    return true;\n  };\n\n  let filteredName = persons.filter(person => {\n    return person.name.toLowerCase().indexOf(searchName.toLowerCase()) !== -1;\n  });\n\n  const deletePersonBtn = id => {\n    personService.deletePerson(id).then(() => {\n      const updatePersons = persons.filter(p => p.id !== id);\n      setPersons(updatePersons);\n    });\n  };\n\n  const addName = event => {\n    event.preventDefault();\n\n    const checkExistingName = persons.filter(person => {\n      return person.name.includes(newName);\n    });\n\n    if (checkExistingName.length === 1) {\n      const confirmWindow = window.confirm(\n        `${newName} is already added to phonebook, replace the old number with a new one ?`\n      );\n      if (confirmWindow) {\n        personService\n          .update(checkExistingName[0].id, {\n            ...checkExistingName[0],\n            number: newNumber\n          })\n          .then(updatedPerson => {\n            let updated = persons.filter(p => p.id !== updatedPerson.id);\n            updated = [...updated, updatedPerson];\n            setPersons(updated);\n            setNewName(\"\");\n            setNewNumber(\"\");\n            setNotificationMsg(`Added ${updatedPerson.name}`);\n            setTimeout(() => {\n              setNotificationMsg(null);\n            }, 2000);\n          })\n          .catch(error => {\n            setErrorMsg(\n              `Information of ${newName} has already been removed from server`\n            );\n            setTimeout(() => {\n              setErrorMsg(null);\n            }, 5000);\n          });\n      }\n    } else {\n      const nameObject = {\n        name: newName,\n        number: newNumber\n      };\n\n      personService\n        .create(nameObject)\n        .then(returnedPerson => {\n          if (added(newName, persons)) {\n            alert(`${newName} is already added to phonebook`);\n          } else {\n            setPersons([...persons, { name: newName, number: newNumber }]);\n          }\n          setNotificationMsg(`Added ${newName}`);\n          setTimeout(() => {\n            setNotificationMsg(null);\n          }, 2000);\n          setNewName(\"\");\n          setNewNumber(\"\");\n        })\n        .catch(error => {\n          setErrorMsg(\n            `Information of ${newName} has already been removed from server`\n          );\n          setTimeout(() => {\n            setErrorMsg(null);\n          }, 5000);\n        });\n    }\n  };\n\n  const handleNameChange = event => {\n    setNewName(event.target.value);\n  };\n\n  const handleNumberChange = event => {\n    setNewNumber(event.target.value);\n  };\n\n  const handleSearchChange = event => {\n    setSearchName(event.target.value);\n  };\n\n  return (\n    <div>\n      <h2>Phonebook</h2>\n      <Notification message={notificationMsg} />\n      <Notification type={\"error\"} message={errorMsg} />\n      Search:\n      <Filter searchName={searchName} handleSearchChange={handleSearchChange} />\n      <PersonForm\n        addName={addName}\n        newName={newName}\n        newNumber={newNumber}\n        handleNameChange={handleNameChange}\n        handleNumberChange={handleNumberChange}\n      />\n      <h2>Numbers</h2>\n      <Persons\n        key={persons.id}\n        persons={filteredName}\n        name={persons.name}\n        number={persons.number}\n        deletePersonBtn={deletePersonBtn}\n      />\n    </div>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"./index.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}