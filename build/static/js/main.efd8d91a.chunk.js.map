{"version":3,"sources":["components/PersonForm.js","components/Persons.js","components/Filter.js","services/persons.js","components/Notification.js","App.js","index.js"],"names":["PersonForm","addName","newName","handleNameChange","newNumber","handleNumberChange","onSubmit","value","onChange","type","Persons","persons","deletePersonBtn","map","human","key","id","name","number","onClick","window","confirm","Filter","props","searchName","handleSearchChange","baseUrl","axios","get","then","response","data","nameObject","post","put","delete","Notification","message","className","App","useState","setPersons","setNewName","setNewNumber","setSearchName","notificationMsg","setNotificationMsg","errorMsg","setErrorMsg","useEffect","personService","initialPersons","filteredName","filter","person","toLowerCase","indexOf","event","target","preventDefault","checkExistingName","includes","length","updatedPerson","updated","p","setTimeout","catch","error","returnedPerson","undefined","find","elm","alert","updatePersons","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.efd8d91a.chunk.js","sourcesContent":["import React from \"react\";\r\n\r\nconst PersonForm = ({\r\n  addName,\r\n  newName,\r\n  handleNameChange,\r\n  newNumber,\r\n  handleNumberChange\r\n}) => {\r\n  return (\r\n    <form onSubmit={addName}>\r\n      <div>\r\n        name: <input value={newName} onChange={handleNameChange} />\r\n      </div>\r\n      <div>\r\n        number: <input value={newNumber} onChange={handleNumberChange} />\r\n      </div>\r\n      <div>\r\n        <button type=\"submit\">add</button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n\r\nexport default PersonForm;\r\n","import React from \"react\";\r\n\r\nconst Persons = ({ persons, deletePersonBtn }) => {\r\n  function windowConfirm(id, name) {\r\n    if (window.confirm(`Delete ${name} ?`)) {\r\n      deletePersonBtn(id);\r\n    }\r\n    return;\r\n  }\r\n\r\n  return (\r\n    <>\r\n      {persons.map(human => (\r\n        <>\r\n          <p key={human.id}>\r\n            {human.name} {human.number}\r\n            <button onClick={() => windowConfirm(human.id, human.name)}>\r\n              delete\r\n            </button>\r\n          </p>\r\n        </>\r\n      ))}\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Persons;\r\n","import React from \"react\";\r\n\r\nconst Filter = props => (\r\n  <input value={props.searchName} onChange={props.handleSearchChange} />\r\n);\r\n\r\nexport default Filter;\r\n","import axios from \"axios\";\r\nconst baseUrl = \"http://localhost:3001/api/persons\";\r\n\r\nconst getAll = () => {\r\n  const request = axios.get(baseUrl);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst create = nameObject => {\r\n  const request = axios.post(baseUrl, nameObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst update = (id, nameObject) => {\r\n  const request = axios.put(`${baseUrl}/${id}`, nameObject);\r\n  return request.then(response => response.data);\r\n};\r\n\r\nconst deletePerson = (id, nameObject) => {\r\n  const request = axios.delete(`${baseUrl}/${id}`, nameObject);\r\n  return request;\r\n};\r\n\r\nexport default { getAll, create, update, deletePerson };\r\n","import React from \"react\";\r\n\r\nconst Notification = ({ message, type }) => {\r\n  if (message === null) {\r\n    return null;\r\n  }\r\n  if (type === \"error\") {\r\n    return <div className=\"notification error\">{message}</div>;\r\n  }\r\n\r\n  return <div className=\"notification\">{message}</div>;\r\n};\r\n\r\nexport default Notification;\r\n","import React, { useState, useEffect } from \"react\";\r\nimport PersonForm from \"./components/PersonForm\";\r\nimport Persons from \"./components/Persons\";\r\nimport Filter from \"./components/Filter\";\r\nimport personService from \"./services/persons\";\r\nimport Notification from \"./components/Notification\";\r\n\r\nconst App = () => {\r\n  const [persons, setPersons] = useState([]);\r\n  const [newName, setNewName] = useState(\"add new name..\");\r\n  const [newNumber, setNewNumber] = useState(\"add number...\");\r\n  const [searchName, setSearchName] = useState(\"\");\r\n  const [notificationMsg, setNotificationMsg] = useState(null);\r\n  const [errorMsg, setErrorMsg] = useState(null);\r\n\r\n  useEffect(() => {\r\n    personService.getAll().then(initialPersons => {\r\n      setPersons(initialPersons);\r\n    });\r\n  }, []);\r\n\r\n  const added = (name, data) => {\r\n    let isAdded = data.find(elm => elm.name === name);\r\n    if (isAdded === undefined) {\r\n      return false;\r\n    }\r\n    return true;\r\n  };\r\n\r\n  let filteredName = persons.filter(person => {\r\n    return person.name.toLowerCase().indexOf(searchName.toLowerCase()) !== -1;\r\n  });\r\n\r\n  const deletePersonBtn = id => {\r\n    personService.deletePerson(id).then(() => {\r\n      const updatePersons = persons.filter(p => p.id !== id);\r\n      setPersons(updatePersons);\r\n    });\r\n  };\r\n\r\n  const addName = event => {\r\n    event.preventDefault();\r\n\r\n    const checkExistingName = persons.filter(person => {\r\n      return person.name.includes(newName);\r\n    });\r\n\r\n    if (checkExistingName.length === 1) {\r\n      const confirmWindow = window.confirm(\r\n        `${newName} is already added to phonebook, replace the old number with a new one ?`\r\n      );\r\n      if (confirmWindow) {\r\n        personService\r\n          .update(checkExistingName[0].id, {\r\n            ...checkExistingName[0],\r\n            number: newNumber\r\n          })\r\n          .then(updatedPerson => {\r\n            let updated = persons.filter(p => p.id !== updatedPerson.id);\r\n            updated = [...updated, updatedPerson];\r\n            setPersons(updated);\r\n            setNewName(\"\");\r\n            setNewNumber(\"\");\r\n            setNotificationMsg(`Added ${updatedPerson.name}`);\r\n            setTimeout(() => {\r\n              setNotificationMsg(null);\r\n            }, 2000);\r\n          })\r\n          .catch(error => {\r\n            setErrorMsg(\r\n              `Information of ${newName} has already been removed from server`\r\n            );\r\n            setTimeout(() => {\r\n              setErrorMsg(null);\r\n            }, 5000);\r\n          });\r\n      }\r\n    } else {\r\n      const nameObject = {\r\n        name: newName,\r\n        number: newNumber\r\n      };\r\n\r\n      personService\r\n        .create(nameObject)\r\n        .then(returnedPerson => {\r\n          if (added(newName, persons)) {\r\n            alert(`${newName} is already added to phonebook`);\r\n          } else {\r\n            setPersons([...persons, { name: newName, number: newNumber }]);\r\n          }\r\n          setNotificationMsg(`Added ${newName}`);\r\n          setTimeout(() => {\r\n            setNotificationMsg(null);\r\n          }, 2000);\r\n          setNewName(\"\");\r\n          setNewNumber(\"\");\r\n        })\r\n        .catch(error => {\r\n          setErrorMsg(\r\n            `Information of ${newName} has already been removed from server`\r\n          );\r\n          setTimeout(() => {\r\n            setErrorMsg(null);\r\n          }, 5000);\r\n        });\r\n    }\r\n  };\r\n\r\n  const handleNameChange = event => {\r\n    setNewName(event.target.value);\r\n  };\r\n\r\n  const handleNumberChange = event => {\r\n    setNewNumber(event.target.value);\r\n  };\r\n\r\n  const handleSearchChange = event => {\r\n    setSearchName(event.target.value);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <h2>Phonebook</h2>\r\n      <Notification message={notificationMsg} />\r\n      <Notification type={\"error\"} message={errorMsg} />\r\n      Search:\r\n      <Filter searchName={searchName} handleSearchChange={handleSearchChange} />\r\n      <PersonForm\r\n        addName={addName}\r\n        newName={newName}\r\n        newNumber={newNumber}\r\n        handleNameChange={handleNameChange}\r\n        handleNumberChange={handleNumberChange}\r\n      />\r\n      <h2>Numbers</h2>\r\n      <Persons\r\n        key={persons.id}\r\n        persons={filteredName}\r\n        name={persons.name}\r\n        number={persons.number}\r\n        deletePersonBtn={deletePersonBtn}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default App;\r\n","import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport \"./index.css\";\r\n\r\nReactDOM.render(<App />, document.getElementById(\"root\"));\r\n"],"sourceRoot":""}